# This file is part of MXE.
# See index.html for further information.

From eeea8330b25a28f60b3b0a12519c83802c933217 Mon Sep 17 00:00:00 2001
From: Zoltan Gyarmati <mr.zoltan.gyarmati@gmail.com>
Date: Thu, 14 Jan 2016 00:56:27 +0100
Subject: [PATCH 3/3] generate and install pkgconfig file

Signed-off-by: Zoltan Gyarmati <mr.zoltan.gyarmati@gmail.com>
---
 quazip/quazip.pro | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/quazip/quazip.pro b/quazip/quazip.pro
index c327a1a..146a46d 100644
--- a/quazip/quazip.pro
+++ b/quazip/quazip.pro
@@ -2,6 +2,9 @@ TEMPLATE = lib
 CONFIG += qt warn_on
 QT -= gui
 
+# Creating pkgconfig .pc file
+CONFIG += create_prl no_install_prl create_pc
+
 # The ABI version.
 
 !win32:VERSION = 1.0.0
@@ -49,11 +52,22 @@ win32 {
     headers.files=$$HEADERS
     CONFIG(staticlib){
         target.path=$$PREFIX/lib
+        QMAKE_PKGCONFIG_LIBDIR = $$PREFIX/lib/
     } else {
         target.path=$$PREFIX/bin
+        QMAKE_PKGCONFIG_LIBDIR = $$PREFIX/bin/
     }
 
     INSTALLS += headers target
+    QMAKE_PKGCONFIG_PREFIX = $$PREFIX
+    QMAKE_PKGCONFIG_INCDIR = $$headers.path
+
+    ## odd, this path seems to be relative to the
+    ## target.path, so if we install the .dll into
+    ## the 'bin' dir, the .pc will go there as well,
+    ## unless have to hack the needed path...
+    ## TODO any nicer solution?
+    QMAKE_PKGCONFIG_DESTDIR = ../lib/pkgconfig
     # workaround for qdatetime.h macro bug
     DEFINES += NOMINMAX
     LIBS += -lz
-- 
1.9.1

