diff --git a/cmake_unofficial/CMakeLists.txt b/cmake_unofficial/CMakeLists.txt
index 825193e..79adbc3 100644
--- a/cmake_unofficial/CMakeLists.txt
+++ b/cmake_unofficial/CMakeLists.txt
@@ -6,15 +6,16 @@ project(xxhash)
 set(XXHASH_LIB_VERSION "0.42.0")
 set(XXHASH_LIB_SOVERSION "0")
 
+if(BUILD_SHARED_LIBS)
 add_library(xxhash SHARED ../xxhash.c)
 set_target_properties(xxhash PROPERTIES COMPILE_DEFINITIONS "XXHASH_EXPORT"
                        VERSION "${XXHASH_LIB_VERSION}"
                        SOVERSION "${XXHASH_LIB_SOVERSION}")
 set(install_libs xxhash)
+endif(BUILD_SHARED_LIBS)
 
-set(BUILD_STATIC_LIBS ON CACHE BOOL "Set to ON to build static libraries")
 if(BUILD_STATIC_LIBS)
-  add_library(xxhashstatic ../xxhash.c)
+  add_library(xxhashstatic STATIC ../xxhash.c)
   set_target_properties(xxhashstatic PROPERTIES OUTPUT_NAME xxhash)
   LIST(APPEND install_libs xxhashstatic)
 endif(BUILD_STATIC_LIBS)
