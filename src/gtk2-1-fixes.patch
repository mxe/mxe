This file is part of MXE. See LICENSE.md for licensing information.

Contains ad hoc patches for cross building.

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 24 Sep 2010 14:17:22 +0200
Subject: [PATCH 1/6] fix gtk+-2.0.pc.in


diff --git a/gtk+-2.0.pc.in b/gtk+-2.0.pc.in
index 1111111..2222222 100644
--- a/gtk+-2.0.pc.in
+++ b/gtk+-2.0.pc.in
@@ -11,5 +11,5 @@ Name: GTK+
 Description: GTK+ Graphical UI Library (${target} target)
 Version: @VERSION@
 Requires: gdk-${target}-2.0 @GTK_PACKAGES@
-Libs: -L${libdir} -lgtk-${target}-@GTK_API_VERSION@ @GTK_EXTRA_LIBS@
+Libs: -L${libdir} -lgtk-${target}-@GTK_API_VERSION@ @GTK_DEP_LIBS@ -lwinspool -lcomctl32 -lcomdlg32
 Cflags: -I${includedir}/gtk-2.0 @GTK_EXTRA_CFLAGS@

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 24 Sep 2010 14:48:31 +0200
Subject: [PATCH 2/6] disable gtkbuiltincache


diff --git a/gtk/Makefile.in b/gtk/Makefile.in
index 1111111..2222222 100644
--- a/gtk/Makefile.in
+++ b/gtk/Makefile.in
@@ -5713,7 +5713,7 @@ stamp-icons: $(STOCK_ICONS)
 	) done 								\
 	&& touch stamp-icons
 
-gtkbuiltincache.h: @REBUILD@ stamp-icons
+_disabled_gtkbuiltincache.h: @REBUILD@ stamp-icons
 	$(MAKE) $(AM_MAKEFLAGS) gtk-update-icon-cache$(EXEEXT)
 	$(gtk_update_icon_cache_program) --force --ignore-theme-index		\
 	   --include-image-data							\

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 24 Sep 2010 14:49:50 +0200
Subject: [PATCH 3/6] disable test-inline-pixbufs.h


diff --git a/demos/Makefile.in b/demos/Makefile.in
index 1111111..2222222 100644
--- a/demos/Makefile.in
+++ b/demos/Makefile.in
@@ -529,7 +529,7 @@ LDADDS = \
 	$(GTK_DEP_LIBS)							\
 	$(MATH_LIB)
 
-BUILT_SOURCES = test-inline-pixbufs.h
+BUILT_SOURCES = 
 testpixbuf_DEPENDENCIES = $(DEPS)
 testpixbuf_drawable_DEPENDENCIES = $(DEPS)
 testpixbuf_save_DEPENDENCIES = $(DEPS)

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 24 Sep 2010 14:54:15 +0200
Subject: [PATCH 4/6] gio not gio-unix


diff --git a/configure b/configure
index 1111111..2222222 100755
--- a/configure
+++ b/configure
@@ -24250,9 +24250,9 @@ fi
 CFLAGS="$saved_cflags"
 LDFLAGS="$saved_ldflags"
 
-# Pull in gio-unix for GDesktopAppInfo usage, see at least gdkapplaunchcontext-x11.c
+# Pull in gio for GDesktopAppInfo usage, see at least gdkapplaunchcontext-x11.c
 if test "x$gdktarget" = "xx11"; then
-  GDK_PACKAGES="$PANGO_PACKAGES gio-unix-2.0 $X_PACKAGES gdk-pixbuf-2.0 cairo-$cairo_backend"
+  GDK_PACKAGES="$PANGO_PACKAGES gio-2.0 $X_PACKAGES gdk-pixbuf-2.0 cairo-$cairo_backend"
 else
   GDK_PACKAGES="$PANGO_PACKAGES gio-2.0 gdk-pixbuf-2.0 cairo-$cairo_backend"
 fi

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Gregorio Litenstein <g.litenstein@gmail.com>
Date: Sun, 28 Jun 2020 13:09:00 -0400
Subject: [PATCH 5/6] gcc-10 -fno-common fix


diff --git a/gdk/gdk.h b/gdk/gdk.h
index 1111111..2222222 100644
--- a/gdk/gdk.h
+++ b/gdk/gdk.h
@@ -186,11 +186,11 @@ void gdk_notify_startup_complete_with_id (const gchar* startup_id);
  */
 
 #if !defined (GDK_DISABLE_DEPRECATED) || defined (GDK_COMPILATION)
-GDKVAR GMutex *gdk_threads_mutex; /* private */
+extern GDKVAR GMutex *gdk_threads_mutex; /* private */
 #endif
 
-GDKVAR GCallback gdk_threads_lock;
-GDKVAR GCallback gdk_threads_unlock;
+extern GDKVAR GCallback gdk_threads_lock;
+extern GDKVAR GCallback gdk_threads_unlock;
 
 void     gdk_threads_enter                    (void);
 void     gdk_threads_leave                    (void);
diff --git a/gdk/gdktypes.h b/gdk/gdktypes.h
index 1111111..2222222 100644
--- a/gdk/gdktypes.h
+++ b/gdk/gdktypes.h
@@ -41,10 +41,10 @@
 #  ifdef GDK_COMPILATION
 #    define GDKVAR __declspec(dllexport)
 #  else
-#    define GDKVAR extern __declspec(dllimport)
+#    define GDKVAR __declspec(dllimport)
 #  endif
 #else
-#  define GDKVAR extern
+#  define GDKVAR 
 #endif
 
 /* The system specific file gdkconfig.h contains such configuration
diff --git a/gtk/gtkdebug.h b/gtk/gtkdebug.h
index 1111111..2222222 100644
--- a/gtk/gtkdebug.h
+++ b/gtk/gtkdebug.h
@@ -66,13 +66,13 @@ typedef enum {
 #  ifdef GTK_COMPILATION
 #    define GTKVAR __declspec(dllexport)
 #  else
-#    define GTKVAR extern __declspec(dllimport)
+#    define GTKVAR __declspec(dllimport)
 #  endif
 #else
-#  define GTKVAR extern
+#  define GTKVAR 
 #endif
 
-GTKVAR guint gtk_debug_flags;
+extern GTKVAR guint gtk_debug_flags;
 
 G_END_DECLS
 
diff --git a/gtk/gtkmain.h b/gtk/gtkmain.h
index 1111111..2222222 100644
--- a/gtk/gtkmain.h
+++ b/gtk/gtkmain.h
@@ -1,4 +1,4 @@
-/* GTK - The GIMP Toolkit
+/* GTK - The GIMP Toolkit
  * Copyright (C) 1995-1997 Peter Mattis, Spencer Kimball and Josh MacDonald
  *
  * This library is free software; you can redistribute it and/or
@@ -69,17 +69,17 @@ typedef gint	(*GtkKeySnoopFunc)	    (GtkWidget	  *grab_widget,
 #ifdef GTK_COMPILATION
 #define GTKMAIN_C_VAR __declspec(dllexport)
 #else
-#define GTKMAIN_C_VAR extern __declspec(dllimport)
+#define GTKMAIN_C_VAR __declspec(dllimport)
 #endif
 #else
-#define GTKMAIN_C_VAR extern
+#define GTKMAIN_C_VAR
 #endif
 
-GTKMAIN_C_VAR const guint gtk_major_version;
-GTKMAIN_C_VAR const guint gtk_minor_version;
-GTKMAIN_C_VAR const guint gtk_micro_version;
-GTKMAIN_C_VAR const guint gtk_binary_age;
-GTKMAIN_C_VAR const guint gtk_interface_age;
+extern GTKMAIN_C_VAR const guint gtk_major_version;
+extern GTKMAIN_C_VAR const guint gtk_minor_version;
+extern GTKMAIN_C_VAR const guint gtk_micro_version;
+extern GTKMAIN_C_VAR const guint gtk_binary_age;
+extern GTKMAIN_C_VAR const guint gtk_interface_age;
 const gchar* gtk_check_version (guint	required_major,
 			        guint	required_minor,
 			        guint	required_micro);
diff --git a/gtk/gtktexttypes.h b/gtk/gtktexttypes.h
index 1111111..2222222 100644
--- a/gtk/gtktexttypes.h
+++ b/gtk/gtktexttypes.h
@@ -46,10 +46,10 @@ typedef struct _GtkTextMarkBody GtkTextMarkBody;
 #ifdef GTK_COMPILATION
 #define VARIABLE __declspec(dllexport)
 #else
-#define VARIABLE extern __declspec(dllimport)
+#define VARIABLE __declspec(dllimport)
 #endif
 #else
-#define VARIABLE extern
+#define VARIABLE 
 #endif
 
 /* In gtktextbtree.c */
@@ -70,7 +70,7 @@ extern const GtkTextLineSegmentClass gtk_text_child_type;
  */
 
 #define GTK_TEXT_UNKNOWN_CHAR 0xFFFC
-VARIABLE const gchar gtk_text_unknown_char_utf8[];
+extern VARIABLE const gchar gtk_text_unknown_char_utf8[];
 
 gboolean gtk_text_byte_begins_utf8_char (const gchar *byte);
 

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Mark Brand <mabrand@mabrand.nl>
Date: Thu, 28 May 2020 19:45:12 +0200
Subject: [PATCH 6/6] remove unnecessary parentheses

..which break build of gtkmm2 using gcc 10.

diff --git a/gtk/gtkfilechooserbutton.h b/gtk/gtkfilechooserbutton.h
index 1111111..2222222 100644
--- a/gtk/gtkfilechooserbutton.h
+++ b/gtk/gtkfilechooserbutton.h
@@ -56,13 +56,13 @@ struct _GtkFileChooserButtonClass
 
   void (* file_set) (GtkFileChooserButton *fc);
 
-  void (*__gtk_reserved1);
-  void (*__gtk_reserved2);
-  void (*__gtk_reserved3);
-  void (*__gtk_reserved4);
-  void (*__gtk_reserved5);
-  void (*__gtk_reserved6);
-  void (*__gtk_reserved7);
+  void *__gtk_reserved1;
+  void *__gtk_reserved2;
+  void *__gtk_reserved3;
+  void *__gtk_reserved4;
+  void *__gtk_reserved5;
+  void *__gtk_reserved6;
+  void *__gtk_reserved7;
 };
 
 
diff --git a/gtk/gtkstatusicon.h b/gtk/gtkstatusicon.h
index 1111111..2222222 100644
--- a/gtk/gtkstatusicon.h
+++ b/gtk/gtkstatusicon.h
@@ -73,8 +73,8 @@ struct _GtkStatusIconClass
                                      gboolean        keyboard_mode,
                                      GtkTooltip     *tooltip);
 
-  void (*__gtk_reserved1);
-  void (*__gtk_reserved2);
+  void *__gtk_reserved1;
+  void *__gtk_reserved2;
 };
 
 GType                 gtk_status_icon_get_type           (void) G_GNUC_CONST;
